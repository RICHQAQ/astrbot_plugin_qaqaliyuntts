{
  "enable": {
    "type": "bool",
    "default": true,
    "description": "å¯ç”¨æ’ä»¶"
  },
  "trigger_probability": {
    "type": "float",
    "default": 0.3,
    "description": "è§¦å‘è¯­éŸ³çš„æ¦‚ç‡ (0-1)"
  },
  "min_text_length": {
    "type": "int",
    "default": 2,
    "description": "æœ€çŸ­æ–‡æœ¬é•¿åº¦"
  },
  "max_saved_audios": {
    "type": "int",
    "default": 20,
    "description": "æœ€å¤§ä¿å­˜éŸ³é¢‘æ–‡ä»¶æ•°ï¼Œ-1è¡¨ç¤ºä¸é™åˆ¶ï¼Œ0è¡¨ç¤ºä¸ä¿å­˜"
  },
  "dashscope": {
    "type": "object",
    "description": "Dashscope (é˜¿é‡Œäº‘ç™¾ç‚¼) TTS é…ç½®",
    "items": {
      "api_key": {
        "type": "string",
        "default": "",
        "description": "Dashscope API Key"
      },
      "model": {
        "type": "string",
        "default": "cosyvoice-v3-flash",
        "description": "æ¨¡å‹åç§° (å¦‚ï¼š cosyvoice-v3-flash)"
      },
      "backend": {
        "type": "string",
        "default": "cosy",
        "description": "qwen / cosy",
        "options": ["qwen", "cosy"]
      },
      "qwen_voice": {
        "type": "string",
        "default": "",
        "description": "Qwen3-TTS éŸ³è‰²æˆ–è‡ªå®šä¹‰éŸ³è‰² ID"
      },
      "cosy_voice": {
        "type": "string",
        "default": "",
        "description": "CosyVoice éŸ³è‰²æˆ–è‡ªå®šä¹‰éŸ³è‰² ID"
      }
    }
  },
  "preprocess": {
    "type": "object",
    "description": "è¯­éŸ³å‰æ–‡æœ¬é¢„å¤„ç† (ç¿»è¯‘/æ¸…æ´—)",
    "items": {
      "enable": {
        "type": "bool",
        "default": false,
        "description": "å¯ç”¨é¢„å¤„ç†"
      },
      "enable_SSML":{
        "type": "bool",
        "default": false,
        "description": "å¯ç”¨ SSML æ ‡ç­¾, æå‡è¯­éŸ³æ•ˆæœ"
      },
      "SSML_history_length":{
        "type": "int",
        "default": 20,
        "description": "SSML å†å²é•¿åº¦ï¼Œç”¨äºä¸Šä¸‹æ–‡è®°å¿†"
      },
      "target_language": {
        "type": "string",
        "default": "ä¸­æ–‡",
        "description": "ç¿»è¯‘ç›®æ ‡è¯­è¨€"
      },
      "provider_id": {
        "type": "string",
        "default": "",
        "description": "ç”¨äºé¢„å¤„ç†çš„ LLM Provider ID",
        "_special": "select_provider"
      },
      "prompt": {
        "type": "text",
        "default": "è¯·å°†ä»¥ä¸‹æ–‡æœ¬ç¿»è¯‘ä¸º {target_language}ï¼š\n\n{text}",
        "description": "ç¿»è¯‘è‡ªå®šä¹‰æç¤ºè¯ (æ”¯æŒ {text}/{target_language})"
      },
      "SSML_prompt": {
        "type": "text",
        "default": "<history>\n{history}\n</history>\n\n<rule>\nã€å¿…é¡»éµå®ˆçš„ SSML è§„åˆ™ï¼‰ã€‘\n\n1. æ‰€æœ‰å†…å®¹å¿…é¡»åœ¨ <speak></speak> å†…ï¼›å¯ç”¨ä¸€ä¸ªæˆ–è€…å¤šä¸ª<speak>è¾¾åˆ°å¤æ‚çš„ç»„åˆï¼Œä¸è¦åµŒå¥— <speak>ã€‚\n2. åªèƒ½ä½¿ç”¨ä»¥ä¸‹æ ‡ç­¾ï¼š<speak>, <break/>, <sub>, <phoneme>, å…¶ä»–ä¸€å¾‹ç¦æ­¢ã€‚\n3. <speak> å…è®¸çš„å±æ€§åªæœ‰è¿™äº›ï¼ˆå…¶ä½™ç¦æ­¢ï¼‰ï¼š\n\n   * rateï¼šè¯­é€Ÿï¼Œå°½é‡è¾ƒå°å˜åŒ–ï¼Œå–å€¼ä¸º [0.5,2] çš„å°æ•°ï¼Œä¾‹å¦‚ 0.9 / 1 / 1.05 / 1.1 / 1.1005\n   * pitchï¼šéŸ³é«˜ï¼Œå°½é‡è¾ƒå°å˜åŒ–ï¼Œå–å€¼ä¸º [0.5,2] çš„å°æ•°ï¼Œä¾‹å¦‚ 0.9 / 1 / 1.05 / 1.1 / 1.1005\n   * volumeï¼šéŸ³é‡ï¼Œå–å€¼ä¸º [0,100] çš„æ•´æ•°ï¼Œä¾‹å¦‚ 40 / 50 / 80\n   * effectï¼šå¯é€‰éŸ³æ•ˆï¼ˆrobot/lolita/lowpass/echo/eq/lpfilter/hpfilterï¼‰\n   * effectValueï¼šå½“ effect ä¸º eq/lpfilter/hpfilter æ—¶æŒ‰è§„èŒƒå¡«å†™\n\n4. <break time=\"...\"/> åªå…è®¸ï¼š\n\n   * ç§’ï¼š1s~10s çš„æ•´æ•°ç§’\n   * æ¯«ç§’ï¼š50ms~10000ms çš„æ•´æ•°æ¯«ç§’\n     è¿ç»­ break æ€»æ—¶é•¿ä¸è¦è¶…è¿‡ 10sï¼ˆè¶…è¿‡ä¼šè¢«æˆªæ–­ï¼‰ã€‚\n5. <phoneme alphabet=\"string\" ph=\"string\">æ–‡æœ¬</phoneme> :\n   * alphabet åªå…è®¸ \n      - \"py\"ï¼šæ‹¼éŸ³\n      - \"cmu\"ï¼šéŸ³æ ‡\n   * ph : æŒ‡å®šå…·ä½“çš„æ‹¼éŸ³æˆ–éŸ³æ ‡,å­—ä¸å­—çš„æ‹¼éŸ³ç”¨ç©ºæ ¼åˆ†éš”ï¼Œæ‹¼éŸ³çš„æ•°ç›®å¿…é¡»ä¸å­—æ•°ä¸€è‡´,æ¯ä¸ªæ‹¼éŸ³ç”±å‘éŸ³éƒ¨åˆ†å’ŒéŸ³è°ƒç»„æˆï¼Œå…¶ä¸­éŸ³è°ƒä¸º 1 åˆ° 5 çš„æ•´æ•°ï¼Œ5 è¡¨ç¤ºè½»å£°ã€‚\n   ```xml\n   <speak>\n   å»<phoneme alphabet=\"py\" ph=\"dian3 dang4 hang2\">å…¸å½“è¡Œ</phoneme>æŠŠè¿™ä¸ªç©æ„<phoneme alphabet=\"py\" ph=\"dang4 diao4\">å½“æ‰</phoneme>\n   </speak>\n\n   <speak>\n   How to spell <phoneme alphabet=\"cmu\" ph=\"S AY N\">sin</phoneme>?\n   </speak>\n   ```\n6. <sub alias=\"string\"></sub> :\n   * aliasï¼šå°†æŸæ®µæ–‡æœ¬æ›¿æ¢ä¸ºæ›´é€‚åˆæœ—è¯»çš„æ–‡æœ¬ã€‚\n   å¦‚ï¼šå°† â€œW3Câ€ è¯»æˆ â€œç½‘ç»œåè®®æ ‡å‡†â€\n   ```xml\n   <speak>\n      <sub alias=\"ç½‘ç»œåè®®æ ‡å‡†\">W3C</sub>\n   </speak>\n   ```\n5. XML ç‰¹æ®Šå­—ç¬¦å¿…é¡»è½¬ä¹‰ï¼š& -> &  < -> <  > -> >  \" -> \"  ' -> '\n6. é¿å…è¾“å‡º emoji / ç‰¹æ®Šç¬¦å·ï¼ˆå¦‚ ğŸ”¥ï¼‰ï¼Œå¿…è¦æ—¶æ”¹ä¸ºæ–‡å­—è¡¨è¾¾ï¼ˆä¾‹å¦‚â€œç«ç„°â€ï¼‰ã€‚\n</rule>\n\nè¯·å°†ä»¥ä¸‹æ–‡æœ¬ç¿»è¯‘ä¸º {target_language}å¹¶ä¸ºå…¶æ·»åŠ é€‚åˆè¯­éŸ³åˆæˆçš„ SSML æ ¼å¼ï¼Œæå‡è¯­éŸ³æ•ˆæœï¼š\n\n{text}\n\nä¸¥æ ¼ç¡®ä¿è¾“å‡ºæ ¼å¼ä»…ä¸º```xmlåŒ…è£¹ï¼Œå¦‚ï¼š\n```xml\n<speak>\n...SSMLå†…å®¹...\n</speak>\n<speak>\n...SSMLå†…å®¹...\n</speak>\n```",
        "description": "SSML è‡ªå®šä¹‰æç¤ºè¯ (æ”¯æŒ {text}/{target_language}/{history})ï¼Œä¼šè¦†ç›–ç¿»è¯‘prompt"
      },
      "SSML_regex": {
        "type": "text",
        "default": "```xml\\s*([\\s\\S]*?)\\s*```",
        "description": "ç”¨äºæå– SSML å†…å®¹çš„æ­£åˆ™è¡¨è¾¾å¼"
      }
    }
  }
}
